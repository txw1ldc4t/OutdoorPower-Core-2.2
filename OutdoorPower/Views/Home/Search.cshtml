@model HomeSearchViewModel
@{
    ViewBag.Title = "Search";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section Styles{
    <link href="~/content/home/search.css" rel="stylesheet" />
}
<section class="section" style="min-height:600px;background-color:lightgray;">
    <div class="row main">
        <div class="container extended">
            <div class="row">
                <div class="col-md-12">
                    <h3>Search</h3>
                </div>
            </div>
            <div class="row">
                <div class="col-md-3 filters">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <form asp-action="Search" id="SearchForm" method="post" style="width:100%;">
                                <div class="accordion accordion-filters">
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" href="#locationbody">
                                                <i class="fa fa-arrow-down"></i>
                                                <span class="col-xs-12">Location</span>
                                            </a>
                                        </div>
                                        <div id="locationbody" class="accordion-panel-content-wrapper in" style="">
                                            <div class="accordion-panel-content">
                                                <div class="col-xs-3">
                                                    <div data-cmp="input" class="form-group">
                                                        <label for="ZipCode" class="control-label">ZIP code</label>
                                                        <input type="tel" id="ZipCode" class="form-control" minlength="1" maxlength="5" pattern="[0-9]{1,5}" name="ZipCode">
                                                        <select id="QZipCodeRadius" class="form-control" name="QZipCodeRadius">
                                                            <option value="5" selected="selected">5 mi</option>
                                                            <option value="10">10 mi</option>
                                                            <option value="25">25 mi</option>
                                                            <option value="50">50 mi</option>
                                                            <option value="100">100 mi</option>
                                                            <option value="200">200 mi</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" href="#specificsbody">
                                                <i class="fa fa-arrow-down"></i>
                                                <span class="col-xs-12">Specific</span>
                                            </a>
                                        </div>
                                        <div id="specificsbody" class="accordion-panel-content-wrapper in" style="">
                                            <div class="accordion-panel-content">
                                                <div class="col-xs-3">
                                                    <div class="form-group">
                                                        <label asp-for="QType" class="control-label" control-label>Type</label>
                                                        <select id="QInventoryType" asp-for="QType" asp-items="Model.TypeList" class="form-control"></select>
                                                    </div>
                                                </div>
                                                <div class="col-xs-3">
                                                    <div class="form-group">
                                                        <label asp-for="QMake" class="control-label" control-label>Brand</label>
                                                        <select id="QInventoryMake" asp-for="QMake" asp-items="Model.MakeList" class="form-control">
                                                            <option value="-1" selected="selected">All</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-xs-3">
                                                    <div class="form-group">
                                                        <label asp-for="QModel" class="control-label" control-label>Model</label>
                                                        <select id="QInventoryModel" asp-for="QModel" class="form-control" disabled="disabled"></select>
                                                    </div>
                                                </div>
                                                <div class="col-xs-3">
                                                    <div class="form-group">
                                                        <label asp-for="QModelOption" class="control-label" control-label>Deck</label>
                                                        <select id="QDeck" asp-for="QModelOption" class="form-control" disabled="disabled"></select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" href="#pricebody">
                                                <i class="fa fa-arrow-down"></i>
                                                <span class="col-xs-12">Price</span>
                                            </a>
                                        </div>
                                        <div id="pricebody" class="accordion-panel-content-wrapper in" style="">
                                            <div class="col-xs-3">
                                                <div data-cmp="input" class="form-group">
                                                    <label asp-for="MinPrice" class="control-label">Min</label>
                                                    <select asp-for="MinPrice" class="form-control">
                                                        <option value="">Select</option>
                                                        <option value="0">0</option>
                                                        <option value="500">500</option>
                                                        <option value="1500">1,500</option>
                                                        <option value="2500">2,500</option>
                                                        <option value="3500">3,500</option>
                                                        <option value="5000">5,000</option>
                                                        <option value="7500">7,500</option>
                                                        <option value="10000">10,000</option>
                                                        <option value="25000">25,000</option>
                                                    </select>
                                                    <div data-cmp="errorMessages" class="has-error"></div>
                                                </div>
                                            </div>
                                            <div class="col-xs-3">
                                                <div data-cmp="input" class="form-group">
                                                    <label asp-for="MaxPrice" class="control-label">Max</label>
                                                    <select asp-for="MaxPrice" class="form-control">
                                                        <option value="">Select</option>
                                                        <option value="0">0</option>
                                                        <option value="500">500</option>
                                                        <option value="1500">1,500</option>
                                                        <option value="2500">2,500</option>
                                                        <option value="3500">3,500</option>
                                                        <option value="5000">5,000</option>
                                                        <option value="7500">7,500</option>
                                                        <option value="10000">10,000</option>
                                                        <option value="25000">25,000</option>
                                                    </select>
                                                    <div data-cmp="errorMessages" class="has-error"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion-group">
                                        <div class="accordion-heading">
                                            <a data-toggle="collapse" href="#enginebody">
                                                <i class="fa fa-arrow-down"></i>
                                                <span class="col-xs-12">Engine</span>
                                            </a>
                                        </div>
                                        <div id="enginebody" class="accordion-panel-content-wrapper in" style="">
                                            <div class="col-xs-12" style="margin-bottom:10px;">
                                                <div data-cmp="input" class="form-group">
                                                    <label asp-for="EngineBrand" class="control-label">Brand</label>
                                                    <select id="EngineBrand" asp-for="EngineBrand" class="form-control" asp-items="Model.EngineBrandList">
                                                        <option>Select</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="divider-primary"></div>
                                            <div class="col-xs-3">
                                                <label class="control-label" style="margin: 5px 0; ">Horse Power</label>
                                            </div>
                                            <div class="col-xs-3">
                                                <div data-cmp="input" class="form-group">
                                                    <label asp-for="HorsePowerMin" class="control-label">Min</label>
                                                    <select id="HorsePowerMin" name="HorsePowerMin" asp-for="HorsePowerMin" class="form-control">
                                                        <option value="">Select</option>
                                                        <option value="0">0</option>
                                                        <option value="500">500</option>
                                                        <option value="1500">1,500</option>
                                                        <option value="2500">2,500</option>
                                                        <option value="3500">3,500</option>
                                                        <option value="5000">5,000</option>
                                                        <option value="7500">7,500</option>
                                                        <option value="10000">10,000</option>
                                                        <option value="25000">25,000</option>
                                                    </select>
                                                    <div data-cmp="errorMessages" class="has-error"></div>
                                                </div>
                                            </div>
                                            <div class="col-xs-3" style="margin-bottom: 10px;">
                                                <div data-cmp="input" class="form-group">
                                                    <label asp-for="HorsePowerMax" class="control-label">Max</label>
                                                    <select id="HorsePowerMax" name="HorsePowerMax" asp-for="HorsePowerMax" class="form-control">
                                                        <option value="">Select</option>
                                                        <option value="0">0</option>
                                                        <option value="500">500</option>
                                                        <option value="1500">1,500</option>
                                                        <option value="2500">2,500</option>
                                                        <option value="3500">3,500</option>
                                                        <option value="5000">5,000</option>
                                                        <option value="7500">7,500</option>
                                                        <option value="10000">10,000</option>
                                                        <option value="25000">25,000</option>
                                                    </select>
                                                    <div data-cmp="errorMessages" class="has-error"></div>
                                                </div>
                                            </div>
                                            <div class="divider-primary"></div>
                                            <div class="col-xs-3">
                                                <label class="control-label" style="margin: 5px 0;">Hours</label>
                                            </div>
                                            <div class="col-xs-3">
                                                <div class="form-group">
                                                    <label asp-for="MinHours" class="control-label">Min</label>
                                                    <select id="MinHours" name="MinHours" asp-for="MinHours" class="form-control">
                                                        <option value="">Select</option>
                                                        <option value="0">0</option>
                                                        <option value="500">500</option>
                                                        <option value="1500">1,500</option>
                                                        <option value="2500">2,500</option>
                                                        <option value="3500">3,500</option>
                                                        <option value="5000">5,000</option>
                                                        <option value="7500">7,500</option>
                                                        <option value="10000">10,000</option>
                                                        <option value="25000">25,000</option>
                                                    </select>
                                                    <div data-cmp="errorMessages" class="has-error"></div>
                                                </div>
                                            </div>
                                            <div class="col-xs-3">
                                                <div class="form-group">
                                                    <label asp-for="MaxHours" class="control-label">Max</label>
                                                    <select id="MaxHours" name="MaxHours" asp-for="MaxHours" class="form-control">
                                                        <option value="">Select</option>
                                                        <option value="500">500</option>
                                                        <option value="1500">1,500</option>
                                                        <option value="2500">2,500</option>
                                                        <option value="3500">3,500</option>
                                                        <option value="5000">5,000</option>
                                                        <option value="7500">7,500</option>
                                                        <option value="10000">10,000</option>
                                                        <option value="25000">25,000</option>
                                                        <option value="999999">25,000+</option>
                                                    </select>
                                                    <div data-cmp="errorMessages" class="has-error"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group" style="padding: 10px;">
                                            <input type="submit" id="BtnSearch" class="btn btn-primary pull-right" value="Search" />
                                            <input type="hidden" asp-for="PageNum" id="PageNum" name="PageNum" />
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-9" style="padding-left: 2vw;">
                    @if (Model.SearchResults == null || Model.SearchResults.Count() == 0)
                    {
                        <p>There are no results to display</p>
                    }
                    else
                    {
                        @if (Model.NavEnd > 1)
                        {
                            <div class="row">
                                <div class="col-sm-12">
                                    <nav aria-label="Page navigation example">
                                        <ul class="pagination">
                                            @if (Model.PageNum == 1)
                                            {
                                                <li class="page-item disabled"><a class="page-link" href="#">Previous</a></li>
                                            }
                                            else
                                            {
                                                <li class="page-item"><a class="page-link" href="javascript:page.changePage(@Model.PageNum-1)">Previous</a></li>
                                            }
                                            @for (int i = Model.NavStart; i <= Model.NavEnd; i++)
                                            {
                                                @if (i != Model.PageNum)
                                                {
                                                    <li class="page-item"><a class="page-link" href="javascript:page.changePage(@i)">@i</a></li>
                                                }
                                                else
                                                {
                                                    <li class="page-item active"><a class="page-link" href="javascript:page.changePage(@i)">@i</a></li>
                                                }
                                            }
                                            @if (Model.NavEnd == Model.PageNum)
                                            {
                                                <li class="page-item disabled"><a class="page-link" href="#">Next</a></li>
                                            }
                                            else
                                            {
                                                <li class="page-item"><a class="page-link" href="javascript:page.changePage(@Model.PageNum+1)">Next</a></li>
                                            }
                                        </ul>
                                    </nav>
                                </div>
                            </div>
                        }
                        <div class="row margin-1em;">
                            @foreach (DealerInventory inventory in Model.SearchResults)
                            {
                                <div class="col-sm-4">
                                    <div class="inventory">
                                        <a class="inventory" href="/product/details?inventoryId=@inventory.Id">
                                            <div class="thumbnail thumbnail-modern-image">
                                                @if (inventory.Images.Count() > 0)
                                                {
                                                    <img src="@inventory.Images[0].WebPath" alt="preview">
                                                }
                                                else
                                                {
                                                    <img class="center" alt="preview" src="~/images/th.jpg" />
                                                }
                                            </div>
                                            <div class="caption">
                                                @if (inventory.Price > 0)
                                                {
                                                    <div>@string.Format("{0:C0}", inventory.Price)</div>
                                                }

                                                <div>@inventory.YMMString</div>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            }
                        </div>
                        @if (Model.NavEnd > 1)
                        {
                            <div class="row">
                                <div class="col-sm-12">
                                    <nav aria-label="Page navigation example">
                                        <ul class="pagination">
                                            @if (Model.PageNum == 1)
                                            {
                                                <li class="page-item disabled"><a class="page-link" href="#">Previous</a></li>
                                            }
                                            else
                                            {
                                                <li class="page-item"><a class="page-link" href="javascript:page.changePage(@Model.PageNum-1)">Previous</a></li>
                                            }
                                            @for (int i = Model.NavStart; i <= Model.NavEnd; i++)
                                            {
                                                @if (i != Model.PageNum)
                                                {
                                                    <li class="page-item"><a class="page-link" href="javascript:page.changePage(@i)">@i</a></li>
                                                }
                                                else
                                                {
                                                    <li class="page-item active"><a class="page-link" href="javascript:page.changePage(@i)">@i</a></li>
                                                }
                                            }
                                            @if (Model.NavEnd == Model.PageNum)
                                            {
                                                <li class="page-item disabled"><a class="page-link" href="#">Next</a></li>
                                            }
                                            else
                                            {
                                                <li class="page-item"><a class="page-link" href="javascript:page.changePage(@Model.PageNum+1)">Next</a></li>
                                            }
                                        </ul>
                                    </nav>
                                </div>
                            </div>
                         }
                    }
                    </div>
            </div>
        </div>
    </div>
</section>
@section Scripts  {
    <script src="~/js/namespace.js"></script>
    <script src="~/js/home/search.js"></script>
}